# OpenOCD configuration for GD32F303 (Cortex-M4) using CMSIS-DAP

# Select the adapter
adapter driver cmsis-dap

# Select the transport protocol
transport select swd

# GD32F303 is Cortex-M4, but its flash controller is compatible with STM32F1 series.
# We set the CPUTAPID for Cortex-M4 to avoid warnings/errors when using stm32f1x.cfg.
if { [info exists CPUTAPID] } {
   set _CPUTAPID $CPUTAPID
} else {
   set _CPUTAPID 0x2ba01477
}

# Define the target
source [find target/stm32f1x.cfg]

# Adjust speed (kHz)
adapter speed 2000

# Reset configuration
reset_config none separate
